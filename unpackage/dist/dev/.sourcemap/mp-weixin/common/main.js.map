{"version":3,"sources":["uni-app:///main.js",null,"webpack:///G:/aa-tong/my-project/recruitApp/App.vue?191f","uni-app:///App.vue","webpack:///G:/aa-tong/my-project/recruitApp/App.vue?d370","webpack:///G:/aa-tong/my-project/recruitApp/App.vue?1f87"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","Vue","use","uView","config","productionTip","prototype","$baseUrl","$chatServerUrl","ignoredElements","push","checkBack","ret","bShwoTip","console","log","data","code","uni","showToast","icon","title","duration","$onLaunched","Promise","resolve","$isResolve","getUserInfo","userInfo","request","url","header","token","getStorageSync","complete","statusCode","userId","id","userRole","role","userToken","userFullName","fullName","userSex","sex","userAge","age","userCity","residentialCity","userIdNumber","idCard","userTime","joinWorkTime","userHeadPic","headPic","phoneNumber","username","favoriteNum","getApp","globalData","setStorageSync","chatInfo","chat_connectServer","formatNumberRgx","num","a","toFixed","formatTime","time","indexOf","split","join","App","mpType","app","store","$mount","g_pingpangTimes","g_firstInit","g_socketTask","g_socketLiveTime","undefined","close","that","connectSocket","success","res","fail","chat_recvFromServer","onSocketOpen","Date","getTime","chat_checkinServer","chat_updateUserListCmd","onSocketError","chat_reConnectServer","onSocketClose","setInterval","curTime","msg","type","sendSocketMessage","JSON","stringify","onSocketMessage","parse","msgList","userList","topMsg","adminList","userIdx","chat_findUser","chatUserId","unshift","chat_recvNewMsg","chat_updatePage","chat_updateUserPic","page","chat_getCurPage","chat_getMsgHistoryCmd","chat_readMsgCmd","msgListSendMark","chat_readMsgSuccess","chat_updateMsgState","delMsg","sender","receiver","contentType","contentText","chat_findMsg","msgInfo","readStatus","user","splice","pages","getCurrentPages","currentRoute","length","route","head_pic","chat_getUserInfoCmd","getSystemInfo","platform","vibrateLong","vibrateShort","i","j","admin_findmsg","chat_sendToServer","err","chat_updateAdminListCmd","chat_deleteAdminList","index","chat_sendAdminList","content","chat_updateUserMsg","loadMore","msgStartId","chat_sendMsgToUserCmd","chat_getMsgUUID","curDate","toISOString","chat_deleteMsgCmd","msgId","curPage","$emit","s","hexDigits","substr","Math","floor","random","uuid","chat_updateReddot","bRed","isRed","list","top","arr_temp","concat"],"mappings":"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","file":"common/main.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import Vue from 'vue'\r\nimport App from './App'\r\nimport store from './store';\r\nimport uView from '@/uni_modules/uview-ui'\r\n\r\nVue.use(uView)\r\nVue.config.productionTip = false\r\n\r\nVue.prototype.$baseUrl = 'http://192.168.0.164:8088/app/recruitment/api';\r\nVue.prototype.$chatServerUrl = 'ws://192.168.0.164:8089/chat'\r\n// Vue.prototype.$chatServerUrl = 'wss://hk.wistechx.cn:8099/chat';\r\n// Vue.prototype.$baseUrl = 'http://192.168.0.99:8088/app/recruitment/api';\r\n\r\nVue.config.ignoredElements.push('wx-open-launch-weapp')\r\n\r\nVue.prototype.checkBack = function (ret, bShwoTip = 1) {\r\n\tconsole.log('状态码判断')\r\n\tconsole.log(ret)\r\n\tif (ret.data.code == 200) {\r\n\t\treturn true;\r\n\t} else if (bShwoTip == 1) {\r\n\t\tif (ret.data.code == 400)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\ttitle: ret.data.data,\r\n\t\t\t\tduration: 2000\r\n\t\t\t});\r\n\t\telse if (ret.data.code == 300)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\ttitle: '请登录后再操作',\r\n\t\t\t\tduration: 2000\r\n\t\t\t});\r\n\t\telse\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\ttitle: \"操作失败，请重试\",\r\n\t\t\t\tduration: 2000\r\n\t\t\t});\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nVue.prototype.$onLaunched = new Promise(resolve => {\r\n\tconsole.log('这是啥')\r\n\tconsole.log(resolve);\r\n\tVue.prototype.$isResolve = resolve;\r\n})\r\n\r\nVue.prototype.getUserInfo = function () {\r\n\tlet userInfo = {};\r\n\tuni.request({\r\n\t\turl: this.$baseUrl + \"/userMsgGet\",\r\n\t\theader: {\r\n\t\t\ttoken: uni.getStorageSync(\"token\"),\r\n\t\t},\r\n\t\tcomplete: (ret) => {\r\n\t\t\tconsole.log('个人信息');\r\n\t\t\tconsole.log(ret);\r\n\t\t\tif (ret.statusCode === 200) {\r\n\t\t\t\tuserInfo.userId = ret.data.data.id;\r\n\t\t\t\tuserInfo.userRole = ret.data.data.role;\r\n\t\t\t\tuserInfo.userToken = ret.data.data.token;\r\n\t\t\t\tuserInfo.userFullName = ret.data.data.fullName;\r\n\t\t\t\tuserInfo.userSex = ret.data.data.sex;\r\n\t\t\t\tuserInfo.userAge = ret.data.data.age;\r\n\t\t\t\tuserInfo.userCity = ret.data.data.residentialCity;\r\n\t\t\t\tuserInfo.userIdNumber = ret.data.data.idCard;\r\n\t\t\t\tuserInfo.userTime = ret.data.data.joinWorkTime;\r\n\t\t\t\tuserInfo.userHeadPic = ret.data.data.headPic;\r\n\t\t\t\tuserInfo.phoneNumber = ret.data.data.username;\r\n\t\t\t\tuserInfo.favoriteNum = ret.data.data.favoriteNum;\r\n\r\n\t\t\t\tgetApp().globalData.userInfo = userInfo;\r\n\t\t\t\tuni.setStorageSync('userId', userInfo.userId);\r\n\t\t\t\tuni.setStorageSync(\"role\", userInfo.userRole);\r\n\t\t\t\tuni.setStorageSync(\"token\", userInfo.userToken);\r\n\t\t\t\tuni.setStorageSync(\"fullName\", userInfo.userFullName);\r\n\t\t\t\tuni.setStorageSync(\"sex\", userInfo.userSex);\r\n\t\t\t\tuni.setStorageSync(\"age\", userInfo.userAge);\r\n\t\t\t\tuni.setStorageSync(\"city\", userInfo.userCity);\r\n\t\t\t\tuni.setStorageSync(\"idNumber\", userInfo.userIdNumber);\r\n\t\t\t\tuni.setStorageSync(\"joinWorkTime\", userInfo.userTime);\r\n\t\t\t\tuni.setStorageSync(\"headPic\", userInfo.userHeadPic);\r\n\t\t\t\tuni.setStorageSync(\"phoneNumber\", userInfo.phoneNumber);\r\n\t\t\t\tuni.setStorageSync('favoriteNum', userInfo.favoriteNum)\r\n\r\n\t\t\t\t//WebSocket\r\n\t\t\t\tif (userInfo.userRole != 2) {\r\n\t\t\t\t\tif (getApp().globalData.chatInfo.token != userInfo.userToken) {\r\n\t\t\t\t\t\tgetApp().globalData.chatInfo.userId = userInfo.userId;\r\n\t\t\t\t\t\tgetApp().globalData.chatInfo.token = userInfo.userToken;\r\n\r\n\t\t\t\t\t\tthis.chat_connectServer();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// k分价格\r\nVue.prototype.formatNumberRgx = function (num) {\r\n\tif (num == \"\" || num == null || num == 0) {\r\n\t\treturn 0;\r\n\t} else {\r\n\t\tlet a = (num / 1e3).toFixed(1) + 'k';\r\n\t\treturn a\r\n\t}\r\n}\r\n\r\n// 日期-替换为.\r\nVue.prototype.formatTime = function (time) {\r\n\tif (time) {\r\n\t\tif (time.indexOf('-') !== -1) return time.split('-').join('.')\r\n\t\telse return time\r\n\t}\r\n\treturn ''\r\n}\r\n\r\nApp.mpType = 'app'\r\n\r\nconst app = new Vue({\r\n\tstore,\r\n\t...App\r\n})\r\n\r\napp.$mount()\r\n\r\nlet g_pingpangTimes = null;\r\nlet g_firstInit = true;\r\nlet g_socketTask = null;\r\nlet g_socketLiveTime = 0; //socket最后收到消息时间\r\n\r\n//连接服务器\r\nVue.prototype.chat_connectServer = function () {\r\n\r\n\tlet token = getApp().globalData.chatInfo.token;\r\n\r\n\tif (token == '' || token == null || token == undefined) return;\r\n\t/* if(g_pingpangTimes != null){\r\n\t\tclearInterval(g_pingpangTimes);\r\n\t\tg_pingpangTimes = null;\r\n\t} */\r\n\tif (g_socketTask != null) {\r\n\t\tg_socketTask.close();\r\n\t\tg_socketTask = null;\r\n\t}\r\n\tg_firstInit = true;\r\n\tg_socketLiveTime = 0;\r\n\r\n\tlet that = this;\r\n\r\n\r\n\tg_socketTask = uni.connectSocket({\r\n\t\turl: this.$chatServerUrl,\r\n\t\t//url: 'ws://192.168.0.164:8099/chat',\r\n\t\t//url: 'ws://test.wistechx.cn:8089/chat',\r\n\t\tsuccess: (res) => {\r\n\t\t\tconsole.log('success' + res)\r\n\t\t},\r\n\t\tfail: (res) => {\r\n\t\t\tconsole.log('fail' + res)\r\n\t\t}\r\n\t});\r\n\r\n\tthis.chat_recvFromServer();\r\n\r\n\tuni.onSocketOpen(function (res) {\r\n\t\tconsole.log('WebSocket连接成功！', res);\r\n\t\tg_socketLiveTime = new Date().getTime();\r\n\t\tthat.chat_checkinServer();\r\n\r\n\t\tthat.chat_updateUserListCmd();\r\n\t});\r\n\r\n\tuni.onSocketError(function (res) {\r\n\t\tconsole.log('WebSocket连接失败');\r\n\t\tthat.chat_reConnectServer();\r\n\t});\r\n\r\n\tuni.onSocketClose(function () {\r\n\t\tconsole.log('WebSocket关闭');\r\n\t\tthat.chat_reConnectServer();\r\n\t})\r\n\r\n\tif (g_pingpangTimes == null) {\r\n\t\tg_pingpangTimes = setInterval(() => {\r\n\r\n\t\t\tthat.chat_checkinServer();\r\n\t\t\tlet curTime = new Date().getTime();\r\n\t\t\tif ((curTime - g_socketLiveTime) / 1000 > 30) {\r\n\t\t\t\t//连续三次没收到心跳包，就重连\r\n\t\t\t\tthat.chat_connectServer();\r\n\t\t\t}\r\n\t\t}, 10000)\r\n\t}\r\n}\r\n\r\n//重连\r\nVue.prototype.chat_reConnectServer = function () {\r\n\tg_socketLiveTime = 0;\r\n}\r\n\r\n//发送心路包\r\nVue.prototype.chat_checkinServer = function () {\r\n\tlet msg = {\r\n\t\ttype: \"checkin\",\r\n\t\ttoken: getApp().globalData.chatInfo.token\r\n\t}\r\n\tuni.sendSocketMessage({\r\n\t\tdata: JSON.stringify(msg),\r\n\t\tsuccess: function () {},\r\n\r\n\t\tfail: function (res) {\r\n\t\t\tthat.chat_reConnectServer();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//处理接收到的消息\r\nVue.prototype.chat_recvFromServer = function () {\r\n\tuni.onSocketMessage((res) => {\r\n\t\tg_socketLiveTime = new Date().getTime();\r\n\t\tconsole.log('收到消息', JSON.parse(res.data));\r\n\t\tlet data = JSON.parse(res.data);\r\n\r\n\t\tif (data.type == 'historyOverview') {\r\n\t\t\tconsole.log('历史消息列表')\r\n\t\t\tdata.msgList = [];\r\n\t\t\tgetApp().globalData.userList.push(data);\r\n\t\t\tthis.topMsg();\r\n\t\t} else if (data.type == 'historyAdmin') {\r\n\t\t\tgetApp().globalData.adminList.push(data);\r\n\r\n\t\t} else if (data.type == 'history') {\r\n\t\t\tlet userIdx = this.chat_findUser(getApp().globalData.chatUserId);\r\n\t\t\tif (userIdx > -1) {\r\n\t\t\t\tgetApp().globalData.userList[userIdx].msgList.unshift(data);\r\n\t\t\t}\r\n\r\n\t\t} else if (data.type == 'message') {\r\n\t\t\t//更新用户列表与消息列表\r\n\t\t\tthis.chat_recvNewMsg(data);\r\n\t\t\tthis.chat_updatePage('chat');\r\n\t\t\tthis.chat_updatePage('list');\r\n\r\n\t\t} else if (data.type == 'messageAdmin') {\r\n\t\t\tgetApp().globalData.adminList.push(data);\r\n\r\n\t\t} else if (data.type == 'user') {\r\n\t\t\t//更新用户头像\r\n\t\t\tthis.chat_updateUserPic(data);\r\n\r\n\t\t} else if (data.type == 'historyOverview-end') {\r\n\t\t\tthis.chat_updatePage('list');\r\n\r\n\t\t\tif (g_firstInit == true) {\r\n\t\t\t\tlet page = this.chat_getCurPage();\r\n\t\t\t\tif (page == 'chat') {\r\n\t\t\t\t\tthis.chat_getMsgHistoryCmd(getApp().globalData.chatUserId, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tg_firstInit = false;\r\n\r\n\t\t} else if (data.type == 'history-end') {\r\n\t\t\tthis.chat_updatePage('chat');\r\n\r\n\t\t\tlet userIdx = this.chat_findUser(getApp().globalData.chatUserId);\r\n\t\t\tif (userIdx > -1) {\r\n\t\t\t\tif (getApp().globalData.userList[userIdx].num > 0)\r\n\t\t\t\t\tthis.chat_readMsgCmd(getApp().globalData.chatUserId);\r\n\t\t\t\tgetApp().globalData.userList[userIdx].msgListSendMark = true;\r\n\t\t\t}\r\n\r\n\t\t} else if (data.type == 'read-success') {\r\n\t\t\tthis.chat_readMsgSuccess(data);\r\n\t\t\tthis.chat_updatePage('list');\r\n\r\n\t\t} else if (data.type == 'delete-success') {\r\n\t\t\tthis.chat_updateMsgState(data);\r\n\t\t\tthis.chat_updatePage('list');\r\n\t\t\tthis.chat_updatePage('chat');\r\n\r\n\t\t} else if (data.type == 'deleteAdmin-success') {\r\n\t\t\tthis.chat_updateMsgState(data);\r\n\r\n\t\t} else if (data.type == 'top-success') {\r\n\t\t\tthis.topMsg(data);\r\n\r\n\t\t} else if (data.type == 'remove-success') {\r\n\t\t\tthis.delMsg(data)\r\n\t\t}\r\n\t})\r\n}\r\n\r\n//处理新消息\r\nVue.prototype.chat_recvNewMsg = function (data) {\r\n\tlet page = this.chat_getCurPage();\r\n\tif (data.sender == getApp().globalData.chatInfo.userId) {\r\n\t\t//自己发的消息\r\n\r\n\t\t//更新用户列表\r\n\t\tlet userIdx = this.chat_findUser(data.receiver);\r\n\t\tif (userIdx > -1) {\r\n\t\t\t//更新该用户\r\n\t\t\tgetApp().globalData.userList[userIdx].contentType = data.contentType;\r\n\t\t\tgetApp().globalData.userList[userIdx].contentText = data.contentText;\r\n\t\t\tgetApp().globalData.userList[userIdx].time = data.time;\r\n\t\t\tgetApp().globalData.userList[userIdx].id = data.id;\r\n\r\n\t\t\t//判断是否是当前客户端发送的消息\r\n\t\t\tif (this.chat_findMsg(userIdx, data.msgInfo)) {\r\n\t\t\t\t//当前登录端发的消息\r\n\t\t\t\t//更新消息状态\r\n\t\t\t\tthis.chat_updateMsgState(data);\r\n\t\t\t} else {\r\n\t\t\t\t//其他登录端发的消息\r\n\t\t\t\t//将消息添加到消息列表里\r\n\t\t\t\tdata.type = 'history';\r\n\t\t\t\tdata.readStatus = 0;\r\n\t\t\t\tgetApp().globalData.userList[userIdx].msgList.push(data);\r\n\t\t\t}\r\n\r\n\t\t\t//把元素移动到前面\r\n\t\t\tif (userIdx > 0) {\r\n\t\t\t\tlet user = getApp().globalData.userList[userIdx];\r\n\t\t\t\tgetApp().globalData.userList.splice(userIdx, 1);\r\n\t\t\t\tgetApp().globalData.userList.unshift(user);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\t//别人发给我的消息\r\n\t\t//更新用户列表\r\n\t\tlet userIdx = this.chat_findUser(data.sender);\r\n\t\tif (userIdx > -1) {\r\n\t\t\t//用户列表已有该用户，更新该用户\r\n\t\t\tgetApp().globalData.userList[userIdx].contentType = data.contentType;\r\n\t\t\tgetApp().globalData.userList[userIdx].contentText = data.contentText;\r\n\t\t\tgetApp().globalData.userList[userIdx].time = data.time;\r\n\t\t\tgetApp().globalData.userList[userIdx].id = data.id;\r\n\t\t\t//将消息添加到消息列表里\r\n\t\t\tdata.type = 'history';\r\n\t\t\tdata.readStatus = 0;\r\n\t\t\tgetApp().globalData.userList[userIdx].msgList.push(data);\r\n\r\n\t\t\tif (page == 'chat' && data.sender == getApp().globalData.chatUserId) {\r\n\t\t\t\t//当前正在与该用户聊天\r\n\t\t\t\t//阅读消息\r\n\t\t\t\tdata.readStatus = 0;\r\n\t\t\t\tthis.chat_readMsgCmd(getApp().globalData.chatUserId);\r\n\t\t\t\tconsole.log(\"正在聊天\")\r\n\t\t\t\t// getApp().globalData.msgbox=false;\r\n\t\t\t\t// uni.setStorageSync('msgbox',false)\r\n\t\t\t} else {\r\n\t\t\t\tdata.readStatus = 1;\r\n\t\t\t\tlet pages = getCurrentPages() // 获取栈实例\r\n\t\t\t\tlet currentRoute = pages[pages.length - 1].route;\r\n\t\t\t\t++getApp().globalData.userList[userIdx].num;\r\n\t\t\t\tif (currentRoute == 'pages/message/chat');\r\n\t\t\t\tconsole.log(\"其他用户\", getApp().globalData.userList[userIdx])\r\n\t\t\t\t// console.log('currentRoute',currentRoute)\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//把元素移动到前面\r\n\t\t\tif (userIdx > 0) {\r\n\t\t\t\tlet user = getApp().globalData.userList[userIdx];\r\n\t\t\t\tgetApp().globalData.userList.splice(userIdx, 1);\r\n\t\t\t\tgetApp().globalData.userList.unshift(user);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//用户列表中没有该用户，将用户添加到用户列表中\r\n\t\t\tlet user = {};\r\n\t\t\tuser.type = 'historyOverview';\r\n\t\t\tuser.userId = data.sender;\r\n\t\t\tuser.num = 1;\r\n\t\t\tuser.contentType = data.contentType;\r\n\t\t\tuser.contentText = data.contentText;\r\n\t\t\tuser.receiver = getApp().globalData.chatInfo.userId;\r\n\t\t\tuser.time = data.time;\r\n\t\t\tuser.username = null;\r\n\t\t\tuser.head_pic = null;\r\n\r\n\t\t\tdata.readStatus = 1\r\n\t\t\tuser.msgList = [];\r\n\t\t\tuser.msgList.push(data);\r\n\t\t\tgetApp().globalData.userList.unshift(user);\r\n\r\n\t\t\t//获取用户头像\r\n\t\t\tthis.chat_getUserInfoCmd(data.sender);\r\n\t\t}\r\n\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tif (res.platform == 'ios') {\r\n\t\t\t\t\tuni.vibrateLong({});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.vibrateShort({});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n}\r\n\r\n//根据msgInfo查找消息\r\nVue.prototype.chat_findMsg = function (userIdx, msgInfo) {\r\n\tfor (let i = getApp().globalData.userList[userIdx].msgList.length - 1, j = 0; i >= 0 && j < 20; --i, ++j) {\r\n\t\tif (getApp().globalData.userList[userIdx].msgList[i].readStatus == -1) {\r\n\t\t\tif (getApp().globalData.userList[userIdx].msgList[i].msgInfo == msgInfo) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n//根据userId从UserList中查找用户\r\nVue.prototype.chat_findUser = function (userId) {\r\n\tfor (let i = 0; i < getApp().globalData.userList.length; ++i) {\r\n\t\tif (getApp().globalData.userList[i].userId == userId)\r\n\t\t\treturn i;\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nVue.prototype.admin_findmsg = function (id) {\r\n\tconsole.log(\"查找系统id\", getApp().globalData.adminList)\r\n\tfor (let i = 0; i < getApp().globalData.adminList.length; ++i) {\r\n\t\tif (getApp().globalData.adminList[i].id == id)\r\n\t\t\treturn i;\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n//发送消息\r\nVue.prototype.chat_sendToServer = function (msg) {\r\n\tconsole.log('发送消息');\r\n\tuni.sendSocketMessage({\r\n\t\tdata: JSON.stringify(msg),\r\n\t\tsuccess: (res) => {\r\n\t\t\tconsole.log('消息发送成功', res)\r\n\t\t},\r\n\t\tfail: (err) => {\r\n\t\t\tconsole.log('消息发送失败', err)\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//发送提取用户列表命令\r\nVue.prototype.chat_updateUserListCmd = function () {\r\n\tlet msg = {\r\n\t\ttype: \"historyOverview\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t}\r\n\tconsole.log('chat_updateUserListCmd');\r\n\tgetApp().globalData.userList = [];\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\nVue.prototype.chat_updateAdminListCmd = function () {\r\n\tlet msg = {\r\n\t\ttype: \"historyAdmin\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t}\r\n\tconsole.log('chat_updateadminListCmd', msg);\r\n\tgetApp().globalData.adminList = [];\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\nVue.prototype.chat_deleteAdminList = function (data) {\r\n\tlet msg = {\r\n\t\ttype: \"deleteAdmin\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\tid: data.id\r\n\t}\r\n\tconsole.log('chat_deleteAdminList', msg);\r\n\tlet index = this.admin_findmsg(data.id)\r\n\tgetApp().globalData.adminList.splice(index, 1)\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\nVue.prototype.chat_sendAdminList = function (type, content) {\r\n\tlet msg = {\r\n\t\ttype: \"messageAdmin\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\treceiver: userId,\r\n\t\tcontentType: type,\r\n\t\tcontentText: content,\r\n\t}\r\n\tconsole.log('messageAdmin')\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\nVue.prototype.chat_updateUserMsg = function (userId) {\r\n\tlet userIdx = this.chat_findUser(userId);\r\n\tif (userIdx > -1) {\r\n\t\tif (getApp().globalData.userList[userIdx].msgList.length == 0 || !getApp().globalData.userList[userIdx]\r\n\t\t\t.msgListSendMark)\r\n\t\t\tthis.chat_getMsgHistoryCmd(userId, false);\r\n\t\telse\r\n\t\t\tthis.chat_updatePage('chat');\r\n\r\n\t\tif (getApp().globalData.userList[userIdx].num > 0)\r\n\t\t\tthis.chat_readMsgCmd(userId);\r\n\t}\r\n}\r\n\r\n//发送提取聊天记录命令:loadMore\r\nVue.prototype.chat_getMsgHistoryCmd = function (userId, loadMore = true) {\r\n\tlet msgStartId = 0;\r\n\tlet userIdx = this.chat_findUser(userId);\r\n\tif (userIdx > -1) {\r\n\t\tif (loadMore) {\r\n\t\t\tif (getApp().globalData.userList[userIdx].msgList.length > 0) {\r\n\t\t\t\tmsgStartId = getApp().globalData.userList[userIdx].msgList[0].id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tgetApp().globalData.userList[userIdx].msgList = [];\r\n\t\t}\r\n\r\n\t}\r\n\tlet msg = {\r\n\t\ttype: \"history\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\tuserId: userId,\r\n\t\tid: msgStartId,\r\n\t\tnum: 20,\r\n\t}\r\n\tconsole.log('history')\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\n//给指定用户发送消息\r\nVue.prototype.chat_sendMsgToUserCmd = function (userId, content, type) {\r\n\tlet msg = {\r\n\t\ttype: \"message\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\treceiver: userId,\r\n\t\tcontentType: type,\r\n\t\tcontentText: content,\r\n\t\tmsgInfo: this.chat_getMsgUUID()\r\n\t}\r\n\tconsole.log('message')\r\n\tthis.chat_sendToServer(msg);\r\n\r\n\tlet userIdx = this.chat_findUser(userId);\r\n\tif (userIdx > -1) {\r\n\t\tlet curDate = new Date();\r\n\t\tmsg.type = 'history';\r\n\t\tmsg.sender = getApp().globalData.chatInfo.userId;\r\n\t\tmsg.time = curDate.toISOString();\r\n\t\tmsg.readStatus = -1; //-1，发送中，-2，已撤销\r\n\t\tgetApp().globalData.userList[userIdx].msgList.push(msg);\r\n\t} else {\r\n\t\t//与新用户聊天，用户列表中没有该用户，将用户添加到用户列表中\r\n\t\tlet curDate = new Date();\r\n\t\tlet user = {};\r\n\t\tuser.type = 'historyOverview';\r\n\t\tuser.userId = userId;\r\n\t\tuser.num = 0;\r\n\t\tuser.contentType = 0;\r\n\t\tuser.contentText = content;\r\n\t\tuser.receiver = userId;\r\n\t\tuser.time = curDate.toISOString();\r\n\t\tuser.username = null;\r\n\t\tuser.head_pic = null;\r\n\r\n\t\tuser.msgList = [];\r\n\t\tmsg.type = 'history';\r\n\t\tmsg.sender = getApp().globalData.chatInfo.userId;\r\n\t\tmsg.time = curDate.toISOString();\r\n\t\tmsg.readStatus = -1; //-1，发送中，-2，已撤销\r\n\t\tuser.msgList.push(msg);\r\n\t\tgetApp().globalData.userList.unshift(user);\r\n\r\n\t\t//获取用户头像\r\n\t\tthis.chat_getUserInfoCmd(user.receiver);\r\n\t}\r\n}\r\n\r\n//更新消息状态\r\nVue.prototype.chat_updateMsgState = function (data) {\r\n\tif (data.type == 'message') {\r\n\t\tlet userIdx = this.chat_findUser(data.receiver);\r\n\t\tif (userIdx > -1) {\r\n\t\t\tfor (let i = getApp().globalData.userList[userIdx].msgList.length - 1; i >= 0; --i) {\r\n\t\t\t\tif (getApp().globalData.userList[userIdx].msgList[i].readStatus == -1) {\r\n\t\t\t\t\tif (getApp().globalData.userList[userIdx].msgList[i].msgInfo == data.msgInfo) {\r\n\t\t\t\t\t\tgetApp().globalData.userList[userIdx].msgList[i].readStatus = 0;\r\n\t\t\t\t\t\tgetApp().globalData.userList[userIdx].msgList[i].id = data.id;\r\n\t\t\t\t\t\tconsole.log('发送成功');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (data.type == 'delete-success') {\r\n\t\t//删除消息\r\n\t\tlet userIdx = this.chat_findUser(data.sender);\r\n\t\tif (userIdx > -1) { //别人撤回\r\n\t\t\tfor (let i = getApp().globalData.userList[userIdx].msgList.length - 1; i >= 0; --i) {\r\n\t\t\t\tif (getApp().globalData.userList[userIdx].msgList[i].id == data.id) {\r\n\t\t\t\t\tgetApp().globalData.userList[userIdx].msgList[i].readStatus = -2;\r\n\t\t\t\t\tif (i == getApp().globalData.userList[userIdx].msgList.length - 1) {\r\n\t\t\t\t\t\tgetApp().globalData.userList[userIdx].contentText = '[对方撤回了一条消息]';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tuserIdx = this.chat_findUser(data.receiver);\r\n\t\tif (userIdx > -1) { //自己撤回\r\n\t\t\tfor (let i = getApp().globalData.userList[userIdx].msgList.length - 1; i >= 0; --i) {\r\n\t\t\t\tif (getApp().globalData.userList[userIdx].msgList[i].id == data.id) {\r\n\t\t\t\t\tgetApp().globalData.userList[userIdx].msgList[i].readStatus = -2;\r\n\t\t\t\t\tif (i == getApp().globalData.userList[userIdx].msgList.length - 1) {\r\n\t\t\t\t\t\tgetApp().globalData.userList[userIdx].contentText = '[你撤回了一条消息]';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (data.type == 'deleteAdmin-success') {\r\n\t\t//删除消息\r\n\t\tlet userIdx = this.admin_findmsg(data.id);\r\n\t\tgetApp().globalData.adminList.splice(userIdx, 1)\r\n\t}\r\n}\r\n\r\n//发送消息已读命令\r\nVue.prototype.chat_readMsgCmd = function (userId) {\r\n\tlet msg = {\r\n\t\ttype: \"read\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\tuserId: userId\r\n\t}\r\n\tconsole.log('read')\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\n//已阅读消息\r\nVue.prototype.chat_readMsgSuccess = function (data) {\r\n\tlet userIdx = this.chat_findUser(data.userId);\r\n\tif (userIdx > -1) {\r\n\t\tgetApp().globalData.userList[userIdx].num = 0;\r\n\t}\r\n}\r\n\r\n//删除消息命令\r\nVue.prototype.chat_deleteMsgCmd = function (userId, msgId) {\r\n\tlet msg = {\r\n\t\ttype: \"delete\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\treceiver: userId,\r\n\t\tid: msgId\r\n\t}\r\n\tconsole.log('delete')\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\n//获取用户信息\r\nVue.prototype.chat_getUserInfoCmd = function (userId) {\r\n\tlet msg = {\r\n\t\ttype: \"user\",\r\n\t\ttoken: getApp().globalData.chatInfo.token,\r\n\t\tuserId: userId\r\n\t}\r\n\tconsole.log('read')\r\n\tthis.chat_sendToServer(msg);\r\n}\r\n\r\n//更新用户头像\r\nVue.prototype.chat_updateUserPic = function (data) {\r\n\tlet userIdx = this.chat_findUser(data.id);\r\n\tif (userIdx > -1) {\r\n\t\t//更新该用户\r\n\t\tgetApp().globalData.userList[userIdx].username = data.username;\r\n\t\tgetApp().globalData.userList[userIdx].head_pic = data.head_pic;\r\n\t}\r\n}\r\n\r\n//获取当前页面\r\nVue.prototype.chat_getCurPage = function () {\r\n\tlet pages = getCurrentPages(); // 获取栈实例\r\n\tconsole.log(pages);\r\n\tif (pages.length > 0) {\r\n\t\tlet currentRoute = pages[pages.length - 1].route;\r\n\t\tconsole.log('栈实例', currentRoute);\r\n\t\tif (currentRoute == 'pages/message/message')\r\n\t\t\treturn 'list';\r\n\t\telse if (currentRoute == 'pages/message/chat')\r\n\t\t\treturn 'chat';\r\n\t\telse\r\n\t\t\treturn '';\r\n\t}\r\n}\r\n\r\n//刷新页面\r\nVue.prototype.chat_updatePage = function (page) {\r\n\tlet curPage = this.chat_getCurPage();\r\n\tif (curPage == page) {\r\n\t\tif (page == 'list') {\r\n\t\t\tuni.$emit('user-list-update', {});\r\n\t\t} else if (page == 'chat') {\r\n\t\t\tuni.$emit('userMsgUpdate', {});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nVue.prototype.chat_getMsgUUID = function () {\r\n\tlet s = [];\r\n\tlet hexDigits = \"0123456789abcdefABCDEF\";\r\n\tfor (let i = 0; i < 36; i++) {\r\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 22), 1);\r\n\t}\r\n\tlet uuid = s.join(\"\");\r\n\treturn uuid;\r\n}\r\n\r\n// 未读消息红点\r\nVue.prototype.chat_updateReddot = function () {\r\n\tlet bRed = false;\r\n\tfor (let i = 0; i < getApp().globalData.userList.length; ++i) {\r\n\t\tif (getApp().globalData.userList[i].num > 0) {\r\n\t\t\tbRed = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\tgetApp().globalData.isRed = bRed;\r\n\tconsole.log(getApp().globalData.isRed)\r\n\t// if (bRed) {\r\n\t// \tuni.showTabBarRedDot({\r\n\t// \t\tindex: 1\r\n\t// \t});\r\n\t// } else {\r\n\t// \tuni.hideTabBarRedDot({\r\n\t// \t\tindex: 1\r\n\t// \t});\r\n\t// }\r\n}\r\n\r\n// 置顶消息\r\nVue.prototype.topMsg = function (data) {\r\n\tconsole.log('置顶/取消置顶消息');\r\n\tconsole.log(data)\r\n\tlet list = getApp().globalData.userList;\r\n\tif (data) {\r\n\t\tfor (let j = 0; j < list.length; j++) {\r\n\t\t\tif (data.userId == list[j].userId) {\r\n\t\t\t\tlist[j].top = data.top;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tlet arr_temp = [].concat(list);\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tif (list[i].top == 1) {\r\n\t\t\tarr_temp.splice(0, 0, arr_temp.splice(i, 1)[0]);\r\n\t\t}\r\n\t};\r\n\r\n\tgetApp().globalData.userList = arr_temp;\r\n}\r\n\r\n// 删除与该人员的聊天列表\r\nVue.prototype.delMsg = function (data) {\r\n\tconsole.log('删除消息');\r\n\tconsole.log(data)\r\n\tlet list = getApp().globalData.userList;\r\n\tif (data) {\r\n\t\tfor (let j = 0; j < list.length; j++) {\r\n\t\t\tif (data.userId == list[j].userId) {\r\n\t\t\t\tlist.splice(j, 1)\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tgetApp().globalData.userList = list;\r\n}","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\n\texport default {\r\n\t\tglobalData: {\r\n\t\t\tuserInfo: {},\r\n\t\t\tchatInfo: {\r\n\t\t\t\tuserId: 0,\r\n\t\t\t\ttoken: ''\r\n\t\t\t},\r\n\t\t\tuserList: [], //聊天用户列表\r\n\t\t\tchatUserId: '', //当前与我聊天的用户的userId\r\n\t\t\tadminList: [],\r\n\t\t\ttabBarList: [{\r\n\t\t\t\t\t\"pagePath\": \"/pages/index/personageIndex\",\r\n\t\t\t\t\t\"text\": \"找工作\",\r\n\t\t\t\t\t\"iconPath\": \"/static/imgs/tabBar/work.png\",\r\n\t\t\t\t\t\"selectedIconPath\": \"/static/imgs/tabBar/work01.png\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"pagePath\": \"/pages/message/message\",\r\n\t\t\t\t\t\"text\": \"消息\",\r\n\t\t\t\t\t\"iconPath\": \"/static/imgs/tabBar/msg.png\",\r\n\t\t\t\t\t\"selectedIconPath\": \"/static/imgs/tabBar/msg01.png\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"pagePath\": \"/pages/mine/mine\",\r\n\t\t\t\t\t\"text\": \"我的\",\r\n\t\t\t\t\t\"iconPath\": \"/static/imgs/tabBar/mine.png\",\r\n\t\t\t\t\t\"selectedIconPath\": \"/static/imgs/tabBar/mine01.png\"\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tisRed: false\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttoken: uni.getStorageSync('token'),\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLaunch() {\r\n\t\t\tthis.token = uni.getStorageSync('token');\r\n\t\t\tconsole.log('token的值', this.token)\r\n\t\t\tif (!this.token) {\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: 'pages/mine/login',\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t//#ifdef APP-PLUS  \r\n\t\t\t\t\t\tplus.navigator.closeSplashscreen();\r\n\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.getUserInfo();\r\n\t\t\t\t//#ifdef APP-PLUS  \r\n\t\t\t\tplus.navigator.closeSplashscreen();\r\n\t\t\t\t//#endif\r\n\t\t\t}\r\n\r\n\t\t\t// #ifdef APP-PLUS-NVUE\r\n\t\t\t// 加载公共图标库\r\n\t\t\tconst domModule = weex.requireModule('dom')\r\n\t\t\tdomModule.addRule('fontFace', {\r\n\t\t\t\t'fontFamily': \"iconfont\",\r\n\t\t\t\t'src': \"url('https://at.alicdn.com/t/font_2961319_02fxlfneetwr.ttf?t=1637726330205') \";\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\r\n\t\t\t// 监听键盘高度变化\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tthis.$store.commit('changeKeyboardHeight', res.height)\r\n\t\t\t})\r\n\r\n\t\t\t//#ifdef APP-PLUS  \r\n\t\t\tconsole.log('APP升级更新');\r\n\t\t\tlet type = uni.getSystemInfoSync().platform;\r\n\t\t\tlet version = plus.runtime.version.split('.').join('');\r\n\r\n\t\t\tlet req = { //升级检测数据\r\n\t\t\t\ttype: type\r\n\t\t\t};\r\n\r\n\t\t\tuni.request({\r\n\t\t\t\turl: this.$baseUrl + \"/versionGet\",\r\n\t\t\t\tdata: req,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log('APP升级更新信息获取成功');\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res.data.version != version) {\r\n\t\t\t\t\t\tuni.showModal({ //提醒用户更新  \r\n\t\t\t\t\t\t\ttitle: \"更新提示\",\r\n\t\t\t\t\t\t\tcontent: \"新版本已经准备好，是否立即更新？\",\r\n\t\t\t\t\t\t\tcancelText: \"稍后进行\",\r\n\t\t\t\t\t\t\tconfirmText: \"立即更新\",\r\n\t\t\t\t\t\t\tconfirmColor: \"#85dbd0\",\r\n\t\t\t\t\t\t\tsuccess: (ret) => {\r\n\t\t\t\t\t\t\t\tif (ret.confirm) {\r\n\t\t\t\t\t\t\t\t\tplus.runtime.openURL(res.data.url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} //else {\r\n\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t//#endif  \r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.$store.dispatch('reconnect')\r\n\t\t\tconsole.log('App Show');\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tconsole.log('App Hide');\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"@/uni_modules/uview-ui/index.scss\";\r\n\t@import \"./common/free.css\";\r\n\t@import \"./common/common.css\";\r\n\t/* #infdef APP-PLUS-NVUE */\r\n\t@import \"./common/free-icon.css\";\r\n\r\n\t/*每个页面公共css */\r\n\t.page-container {\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f3f7fa;\r\n\t}\r\n\r\n\t.uni-p-b-98 {\r\n\t\tpadding-bottom: 100rpx;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tpadding-top: 250rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\timage {\r\n\t\t\twidth: 222rpx;\r\n\t\t\theight: 152rpx;\r\n\t\t}\r\n\r\n\t\ttext {\r\n\t\t\tmargin-top: 40rpx;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #c8c8c8;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1649907226810\n      var cssReload = require(\"G:/Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}